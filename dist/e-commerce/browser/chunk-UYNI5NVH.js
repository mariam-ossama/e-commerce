import{a as U}from"./chunk-PHUZTUAQ.js";import{a as I}from"./chunk-CXBX5XKH.js";import{a as F}from"./chunk-SBBWHKLP.js";import{b as n,d as P,g as S,i as x,k,m as C}from"./chunk-TRUN5YG2.js";import{a as y}from"./chunk-TFOTLTCI.js";import{C as v}from"./chunk-44CX672S.js";import{a as w}from"./chunk-MGYB2XQA.js";import{a as h}from"./chunk-CRQC5KLK.js";import{l as E}from"./chunk-T4L5SLXP.js";import"./chunk-PG6YDBKM.js";import{h as f}from"./chunk-WZYW2SYO.js";import"./chunk-XP42DWIM.js";import{Gb as b,Oa as l,Tb as a,Ua as m,Vb as g,X as i,_a as u,sb as d,tb as r,ub as t,vb as p}from"./chunk-U2DWYZVE.js";import"./chunk-4CLCTAJ7.js";var A=class c{constructor(e){this.flowbiteService=e}authService=i(w);paymentService=i(I);fb=i(k);toastrService=i(E);cookieService=i(h);router=i(f);userData={};ordersList=[];changePassword;userAddress;ngOnInit(){this.getUserData(),this.getAllUserOrders(),this.initForm(),this.flowbiteService.loadFlowbite(e=>{v()})}getUserData(){this.userData=this.authService.decodeToken()}initForm(){this.changePassword=this.fb.group({currentPassword:[null,[n.required,n.pattern("")]],password:[null,[n.required,n.pattern("")]],rePassword:[null,[n.required,n.pattern("")]]},{validators:[this.confirmPassword]})}confirmPassword(e){let s=e.get("password")?.value,o=e.get("rePassword")?.value;return s===o?null:(e.get("rePassword")?.setErrors({mismatch:!0}),{mismatch:!0})}getAllUserOrders(){this.paymentService.getUserOrders(this.userData.id).subscribe({next:e=>{console.log(e),this.ordersList=e}})}changeUserPawword(){this.changePassword.valid&&this.authService.updateUserPassword(this.changePassword.value).subscribe({next:e=>{e.message==="success"?(this.cookieService.set("token",e.token),this.toastrService.success("password changed successfully"),this.router.navigate(["/login"])):this.toastrService.error("failed to change password")}})}static \u0275fac=function(s){return new(s||c)(m(y))};static \u0275cmp=u({type:c,selectors:[["app-profile"]],decls:32,vars:14,consts:[[1,"min-h-screen","py-14","bg"],[1,""],[1,"txt-color","text-center","py-5","text-4xl","font-bold"],[1,"text-center","text-2xl","second-txt-color"],[1,"tabs-container","flex","flex-col","justify-center","items-center","txt-color"],[1,"mb-4","border-b","border-gray-200","dark:border-gray-700"],["id","default-tab","data-tabs-toggle","#default-tab-content","role","tablist",1,"flex","flex-wrap","-mb-px","text-sm","font-medium","text-center"],["role","presentation",1,"me-2","cursor-pointer"],["id","all-orders-tab","data-tabs-target","#all-orders","type","button","role","tab","aria-controls","all-orders","aria-selected","true",1,"inline-block","p-4","border-b-2","rounded-t-lg","hover:text-[#8B5E35]","hover:border-gray-300","dark:hover:text-gray-300"],["id","change-password-tab","data-tabs-target","#change-password","type","button","role","tab","aria-controls","change-password","aria-selected","false",1,"inline-block","p-4","border-b-2","rounded-t-lg","hover:text-[#8B5E35]","hover:border-gray-300","dark:hover:text-gray-300"],["id","default-tab-content",1,"w-full"],["id","all-orders","role","tabpanel","aria-labelledby","all-orders-tab",1,"hidden","p-4","rounded-lg","bg-gray-50","dark:bg-gray-800"],["id","change-password","role","tabpanel","aria-labelledby","change-password-tab",1,"hidden","p-4","rounded-lg","bg-gray-50","dark:bg-gray-800"],[1,"flex","justify-center","items-center"],[1,"card","block","w-3/4","p-6","m-2","bg-white","border","border-gray-200","rounded-lg","shadow-lg","hover:bg-gray-100","transition-all","duration-200"],[1,"text-center","txt-color","font-bold","text-3xl"],[1,"text-center","second-txt-color"],[3,"ngSubmit","formGroup"],[3,"control","inputId","label","inputPlaceholder"],[1,"btn-alternate-style"]],template:function(s,o){s&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),a(3,"Personal Information"),t(),r(4,"p",3),a(5),t(),r(6,"div",4)(7,"div",5)(8,"ul",6)(9,"li",7)(10,"button",8),a(11,"All Orders"),t()(),r(12,"li",7)(13,"button",9),a(14,"Change Password"),t()()()(),r(15,"div",10)(16,"div",11),p(17,"app-all-orders"),t(),r(18,"div",12)(19,"div",13)(20,"div",14),p(21,"div",13),r(22,"h2",15),a(23,"Change Password"),t(),r(24,"p",16),a(25,"change your password"),t(),r(26,"form",17),b("ngSubmit",function(){return o.changeUserPawword()}),p(27,"app-input",18)(28,"app-input",18)(29,"app-input",18),r(30,"button",19),a(31,"Submit"),t()()()()()()()()()),s&2&&(l(5),g(" ",o.userData.name),l(21),d("formGroup",o.changePassword),l(),d("control",o.changePassword.get("currentPassword"))("inputId","currentPassword")("label","Current Password")("inputPlaceholder","Enter your current password..."),l(),d("control",o.changePassword.get("password"))("inputId","password")("label","New Password")("inputPlaceholder","Enter New password..."),l(),d("control",o.changePassword.get("rePassword"))("inputId","rePassword")("label","Re-password")("inputPlaceholder","Confirm New password..."))},dependencies:[F,C,S,P,x,U],encapsulation:2})};export{A as ProfileComponent};
