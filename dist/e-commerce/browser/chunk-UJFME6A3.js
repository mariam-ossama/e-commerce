import{a as P}from"./chunk-7UIQC7ES.js";import{l as W}from"./chunk-T4L5SLXP.js";import{a as g}from"./chunk-PG6YDBKM.js";import{i as H}from"./chunk-WZYW2SYO.js";import{s as j}from"./chunk-XP42DWIM.js";import{Bb as _,Gb as f,Ib as I,La as L,Mb as F,Nb as E,Oa as o,Ob as V,S as y,Tb as u,Ub as O,Vb as h,X as l,_a as k,ba as m,bc as p,ca as v,fb as T,mb as x,nb as w,oa as S,sb as d,tb as n,ub as a,vb as c}from"./chunk-U2DWYZVE.js";var C=class r{httpClient=l(j);addToWishlist(i){return this.httpClient.post(g.baseUrl+"wishlist",{productId:i})}removeFromWishlist(i){return this.httpClient.delete(g.baseUrl+`wishlist/${i}`)}getWishlist(){return this.httpClient.get(g.baseUrl+"wishlist")}static \u0275fac=function(e){return new(e||r)};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"})};var U=["favourite"],b=(r,i)=>["/details",r,i];function D(r,i){r&1&&c(0,"div",3)}function M(r,i){if(r&1){let e=_();n(0,"a")(1,"img",17),f("load",function(){m(e);let s=I();return v(s.onImageLoad())}),a()()}if(r&2){let e=I();o(),d("src",e.product.imageCover,L)("alt",e.product.title)("routerLink",p(3,b,e.product.slug,e.product._id))}}var Q=class r{cartService=l(P);toastrService=l(W);wishlistService=l(C);product={};favourite;heartIcon;isFavourite=!1;favouriteToggled=new T;imageLoaded=!1;ngAfterViewInit(){this.heartIcon=this.favourite.nativeElement,this.updateHeartIcon()}ngOnChanges(i){i.isFavourite&&this.heartIcon&&this.updateHeartIcon()}onImageLoad(){this.imageLoaded=!0}addToCart(i){this.cartService.addProductToCart(i).subscribe({next:e=>{console.log(e.data),e.status==="success"&&this.toastrService.success(e.message)}})}updateHeartIcon(){this.heartIcon&&(this.isFavourite?(this.heartIcon.classList.replace("fa-regular","fa-solid"),this.heartIcon.classList.add("text-red-600"),this.heartIcon.classList.remove("txt-color")):(this.heartIcon.classList.replace("fa-solid","fa-regular"),this.heartIcon.classList.remove("text-red-600"),this.heartIcon.classList.add("txt-color")))}addToFavourites(i){this.isFavourite=!this.isFavourite,this.isFavourite?this.wishlistService.addToWishlist(i).subscribe({next:e=>{console.log(e),e.status==="success"&&(this.toastrService.success(e.message),this.updateHeartIcon(),this.favouriteToggled.emit(this.product.id))}}):this.wishlistService.removeFromWishlist(i).subscribe({next:e=>{console.log(e),e.status==="success"&&(this.updateHeartIcon(),this.favouriteToggled.emit(this.product.id))}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=k({type:r,selectors:[["app-card"]],viewQuery:function(e,t){if(e&1&&F(U,5),e&2){let s;E(s=V())&&(t.favourite=s.first)}},inputs:{product:"product",isFavourite:"isFavourite"},outputs:{favouriteToggled:"favouriteToggled"},features:[S],decls:23,vars:18,consts:[["favourite",""],[1,"product-item","txt-color","overflow-hidden","group/card"],[1,"max-w-full","bg-white","border","border-gray-200","rounded-lg","shadow-md","cursor-pointer","relative"],[1,"p-2","rounded-lg","w-full","h-60","bg-gray-200","animate-pulse"],[1,"absolute","top-4","end-4","bg-gray-100","size-10","rounded-full","p-2","flex","items-center","justify-center","cursor-pointer",3,"click"],[1,"fa-regular","fa-heart","text-2xl","txt-color"],[1,"px-5","pb-5"],[1,"text-xl","font-semibold","tracking-tight","text-gray-900","dark:text-white","line-clamp-1",3,"routerLink"],[1,"flex","items-center","mt-2.5","mb-5",3,"routerLink"],[1,"flex","items-center","space-x-1","rtl:space-x-reverse"],[1,"fa-solid","fa-star","w-4","h-4","review-color"],[1,"font-semibold"],[1,"text-xs","ms-1","third-txt-color"],[1,"flex","items-center","justify-between"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white",3,"routerLink"],[1,"span","w-[max-content]","p-2","main-bg-color","text-white","rounded-lg","cursor-pointer","translate-x-[160%]","group-hover/card:translate-x-0","transition","duration-500",3,"click"],[1,"fa-solid","fa-plus"],[1,"p-2","rounded-lg","object-cover","w-full","block",3,"load","src","alt","routerLink"]],template:function(e,t){if(e&1){let s=_();n(0,"div",1)(1,"div",2),x(2,D,1,0,"div",3),x(3,M,2,6,"a"),n(4,"button",4),f("click",function(){return m(s),v(t.addToFavourites(t.product._id))}),c(5,"i",5,0),a(),n(7,"div",6)(8,"a")(9,"h5",7),u(10),a()(),n(11,"div",8)(12,"div",9),c(13,"i",10),a(),n(14,"span",11),u(15),a(),n(16,"span",12),u(17),a()(),n(18,"div",13)(19,"span",14),u(20),a(),n(21,"div",15),f("click",function(){return m(s),v(t.addToCart(t.product._id))}),c(22,"i",16),a()()()()()}e&2&&(o(2),w(t.imageLoaded?-1:2),o(),w(t.product.imageCover?3:-1),o(6),d("routerLink",p(9,b,t.product.slug,t.product._id)),o(),O(t.product.title),o(),d("routerLink",p(12,b,t.product.slug,t.product._id)),o(4),h(" ",t.product.ratingsAverage," "),o(2),h(" (+",t.product.ratingsQuantity,") "),o(2),d("routerLink",p(15,b,t.product.slug,t.product._id)),o(),h("$ ",t.product.price))},dependencies:[H],encapsulation:2})};export{C as a,Q as b};
