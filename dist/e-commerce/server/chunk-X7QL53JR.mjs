import './polyfills.server.mjs';
import{a as Q}from"./chunk-R3P46UBH.mjs";import{l as O}from"./chunk-B6XYCFTU.mjs";import{a as q}from"./chunk-IT7UANVT.mjs";import{i as V}from"./chunk-FS4VX5NN.mjs";import{w as L}from"./chunk-LYQUDD53.mjs";import{Ab as i,Bb as n,Cb as m,Fb as b,Gb as y,Lb as g,Mb as c,Na as f,Qa as l,R as _,Vb as P,W as s,Xb as a,Yb as k,Zb as v,_b as T,aa as u,ab as h,ba as p,qb as C,rb as w,sb as D,ub as I,vb as S}from"./chunk-F7B3EIZI.mjs";import"./chunk-X2SEQXRR.mjs";var E=class r{httpClient=s(L);getProductDetails(e){return this.httpClient.get(q.baseUrl+`products/${e}`)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=_({token:r,factory:r.\u0275fac,providedIn:"root"})};function F(r,e){if(r&1){let t=b();i(0,"img",20),g("click",function(){let o=u(t).$implicit,x=c(2);return p(x.changeImage(o))}),n()}if(r&2){let t=e.$implicit,d=c(2);P("brown",d.selectedImage===t),y("src",t,f)}}function M(r,e){if(r&1){let t=b();i(0,"div",2)(1,"div",4)(2,"div",5),I(3,F,1,3,"img",6,D),n(),i(5,"div",7),m(6,"img",8),n()(),i(7,"div",7)(8,"div",9),a(9),n(),i(10,"h2",10),a(11),n(),i(12,"p",11),a(13),n(),i(14,"div",12)(15,"label",13),a(16),n(),i(17,"div",14)(18,"button",15),g("click",function(){u(t);let o=c();return p(o.updateProductQuantity(o.productDetails._id,o.quantity-1))}),a(19," - "),n(),i(20,"span"),a(21),n(),i(22,"button",15),g("click",function(){u(t);let o=c();return p(o.updateProductQuantity(o.productDetails._id,o.quantity+1))}),a(23," + "),n()()(),i(24,"div",16)(25,"div",17),a(26),n(),i(27,"button",18),g("click",function(){u(t);let o=c();return p(o.addToCart(o.productDetails._id))}),a(28," + Add to Cart "),n()(),i(29,"div",19),a(30," \u{1F69A} Estimated Delivery: "),i(31,"b"),a(32,"01 Jan 2023 - 03 Jan 2023"),n()()()()}if(r&2){let t=c();l(3),S(t.productDetails.images),l(3),y("src",t.selectedImage,f),l(3),T("\u2B50 ",t.productDetails.ratingsAverage," (+",t.productDetails.ratingsQuantity,")"),l(2),v(" ",t.productDetails.title," "),l(2),v(" ",t.productDetails.description," "),l(3),v("Quantity: ",t.quantity),l(5),k(t.quantity),l(5),v("$",t.productDetails.price)}}function U(r,e){r&1&&(i(0,"div",3)(1,"div",4)(2,"div",5),m(3,"div",21)(4,"div",21)(5,"div",21),n(),i(6,"div",7),m(7,"div",22),n()(),i(8,"div",23),m(9,"div",24)(10,"div",25),i(11,"div",26),m(12,"div",27)(13,"div",28)(14,"div",29),n(),i(15,"div"),m(16,"div",30),i(17,"div",14),m(18,"div",31)(19,"div",32)(20,"div",31),n()(),i(21,"div",33),m(22,"div",34)(23,"div",35),n(),m(24,"div",36),n()())}var j=class r{productDetailsService=s(E);activatedRoute=s(V);cartService=s(Q);toastrServitce=s(O);productDetails={};quantity=0;id=null;slug=null;isLoading=!1;selectedImage="";ngOnInit(){this.getProductId(),this.getProductDetailsData(),this.getCartItems()}getProductId(){this.activatedRoute.paramMap.subscribe({next:e=>{this.id=e.get("id"),this.slug=e.get("slug")}})}getProductDetailsData(){this.isLoading=!0,this.productDetailsService.getProductDetails(this.id).subscribe({next:e=>{console.log(e.data),this.productDetails=e.data,this.selectedImage=this.productDetails.imageCover,this.isLoading=!1},error:e=>{console.log(e),this.isLoading=!1}})}addToCart(e){this.cartService.addProductToCart(e).subscribe({next:t=>{if(console.log(t),t.status==="success"){this.toastrServitce.success(t.message);let d=t.data.products.find(o=>o.product===this.id);this.quantity=d?d.count:0}}})}updateProductQuantity(e,t){this.cartService.updateItemQuantity(e,t).subscribe({next:d=>{if(console.log(d.data),d.status==="success"){let o=d.data.products.find(x=>x.product._id===this.id);this.quantity=o?o.count:0}}})}getCartItems(){this.cartService.getLoggedUserCart().subscribe({next:e=>{console.log(e);let t=e.data.products.find(d=>d.product._id===this.id);this.quantity=t?t.count:0}})}changeImage(e){this.selectedImage=e}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=h({type:r,selectors:[["app-details"]],decls:4,vars:1,consts:[[1,"py-14","min-h-screen"],[1,"container","w-3/4"],[1,"flex","flex-col","md:flex-row","gap-10","p-6","font-sans"],[1,"flex","flex-col","md:flex-row","gap-10","p-6","font-sans","animate-pulse"],[1,"flex","gap-4"],[1,"flex","flex-col","gap-3"],["alt","Product Image",1,"w-16","h-16","rounded-md","cursor-pointer","border","hover:border-brown-600",3,"src","brown"],[1,"flex-1"],[1,"w-[350px]","rounded-lg","shadow-md",3,"src"],[1,"text-yellow-500","font-semibold","mb-2"],[1,"text-2xl","font-bold","mb-2"],[1,"text-gray-600","mb-6"],[1,"mb-6"],[1,"block","mb-2","font-medium"],[1,"flex","items-center","gap-4"],[1,"w-8","h-8","border","rounded-md","flex","items-center","justify-center",3,"click"],[1,"flex","items-center","gap-6","my-8"],[1,"text-2xl","font-bold"],[1,"btn-alternate-style",3,"click"],[1,"text-sm","text-gray-600"],["alt","Product Image",1,"w-16","h-16","rounded-md","cursor-pointer","border","hover:border-brown-600",3,"click","src"],[1,"w-16","h-16","bg-gray-300","rounded-md"],[1,"w-[350px]","h-[350px]","bg-gray-300","rounded-lg","shadow-md"],[1,"flex-1","space-y-6"],[1,"h-4","w-40","bg-gray-300","rounded"],[1,"h-6","w-2/3","bg-gray-300","rounded"],[1,"space-y-2"],[1,"h-3","bg-gray-300","rounded","w-full"],[1,"h-3","bg-gray-300","rounded","w-5/6"],[1,"h-3","bg-gray-300","rounded","w-4/6"],[1,"h-4","w-32","bg-gray-300","rounded","mb-3"],[1,"w-8","h-8","bg-gray-300","rounded-md"],[1,"w-6","h-6","bg-gray-200","rounded"],[1,"flex","items-center","gap-6"],[1,"h-6","w-24","bg-gray-300","rounded"],[1,"h-10","w-32","bg-gray-300","rounded"],[1,"h-4","w-48","bg-gray-200","rounded"]],template:function(t,d){t&1&&(i(0,"section",0)(1,"div",1),C(2,M,33,8,"div",2)(3,U,25,0,"div",3),n()()),t&2&&(l(2),w(d.isLoading?3:2))},styles:[".brown[_ngcontent-%COMP%]{border-color:#6d3807}"]})};export{j as DetailsComponent};
