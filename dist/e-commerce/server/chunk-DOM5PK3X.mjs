import './polyfills.server.mjs';
import{l as I}from"./chunk-B6XYCFTU.mjs";import{a as T}from"./chunk-HEZLGDGX.mjs";import{b as l,d as S,g as P,i as F,k as V,m as k}from"./chunk-OK7ZK6LL.mjs";import{a as E}from"./chunk-UJNSQJWN.mjs";import"./chunk-IT7UANVT.mjs";import{a as _}from"./chunk-XRSPYYRK.mjs";import{l as b}from"./chunk-FS4VX5NN.mjs";import"./chunk-LYQUDD53.mjs";import{Fb as w,Kb as y,Mb as p,Qa as n,Vb as h,W as c,Xb as r,aa as g,ab as C,ba as x,qb as f,rb as v,wb as d,xb as t,yb as i,zb as m}from"./chunk-F7B3EIZI.mjs";import"./chunk-X2SEQXRR.mjs";function G(o,a){o&1&&m(0,"i",17)}function R(o,a){if(o&1){let e=w();t(0,"div",11)(1,"h2",12),r(2,"Verify Email"),i(),t(3,"p",13),r(4,"Enter your Email to send verification code"),i(),t(5,"form",14),y("ngSubmit",function(){g(e);let u=p();return x(u.verifyUserEmail())}),m(6,"app-input",15),t(7,"button",16),r(8,"Verify Email "),t(9,"span"),f(10,G,1,0,"i",17),i()()()()}if(o&2){let e=p();n(5),d("formGroup",e.verifyEmail),n(),d("control",e.verifyEmail.get("email"))("inputType","email")("inputId","email")("inputPlaceholder","Enter your email...")("label","E-mail"),n(4),v(e.isLoading?10:-1)}}function U(o,a){o&1&&m(0,"i",17)}function N(o,a){if(o&1){let e=w();t(0,"div",11)(1,"h2",12),r(2,"Verify Reset Code"),i(),t(3,"p",13),r(4,"Enter verification code sent to your email"),i(),t(5,"form",14),y("ngSubmit",function(){g(e);let u=p();return x(u.verifyUserCode())}),m(6,"app-input",15),t(7,"button",16),r(8,"Send Reset Code "),t(9,"span"),f(10,U,1,0,"i",17),i()()()()}if(o&2){let e=p();n(5),d("formGroup",e.verifyCode),n(),d("control",e.verifyCode.get("resetCode"))("inputType","text")("inputId","resetCode")("inputPlaceholder","Enter reset code...")("label","Reset Code"),n(4),v(e.isLoading?10:-1)}}function M(o,a){o&1&&m(0,"i",17)}function j(o,a){if(o&1){let e=w();t(0,"div",11)(1,"h2",12),r(2,"Reset your Password"),i(),t(3,"p",13),r(4,"Enter new password"),i(),t(5,"form",14),y("ngSubmit",function(){g(e);let u=p();return x(u.resetUserPassword())}),m(6,"app-input",15)(7,"app-input",18),t(8,"button",16),r(9,"Reset Your Password "),t(10,"span"),f(11,M,1,0,"i",17),i()()()()}if(o&2){let e=p();n(5),d("formGroup",e.resetPassword),n(),d("control",e.resetPassword.get("email"))("inputType","email")("inputId","email")("inputPlaceholder","Enter your email...")("label","E-mail"),n(),d("control",e.resetPassword.get("newPassword"))("inputId","newPassword")("inputPlaceholder","Enter your new password...")("label","New Password"),n(4),v(e.isLoading?11:-1)}}var L=class o{authService=c(E);fb=c(V);toastrService=c(I);cookieService=c(_);router=c(b);isLoading=!1;step=1;verifyEmail;verifyCode;resetPassword;ngOnInit(){this.initForms()}initForms(){this.verifyEmail=this.fb.group({email:[null,[l.required,l.email]]}),this.verifyCode=this.fb.group({resetCode:[null,[l.required,l.minLength(4)]]}),this.resetPassword=this.fb.group({email:[null,[l.required,l.email]],newPassword:[null,[l.required,l.pattern(/^\w{4,}$/)]]})}verifyUserEmail(){this.isLoading=!0,this.verifyEmail.valid&&this.authService.verifyUserEmail(this.verifyEmail.value).subscribe({next:a=>{if(a.statusMsg==="success"){this.isLoading=!1,this.toastrService.success(a.message),this.step=2;let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.setValue(e),this.resetPassword.get("email")?.disable()}}})}verifyUserCode(){this.isLoading=!0,this.verifyCode.valid&&this.authService.verifyUserResetCode(this.verifyCode.value).subscribe({next:a=>{a.status==="Success"&&(this.isLoading=!1,this.step=3,this.toastrService.success("verification code sent successfully"))}})}resetUserPassword(){this.isLoading=!0,this.resetPassword.valid&&this.authService.resetUserPassword(this.resetPassword.getRawValue()).subscribe({next:a=>{this.isLoading=!1,this.cookieService.set("token",a.token),this.router.navigate(["/home"])}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-forgot-password"]],decls:31,vars:7,consts:[[1,"min-h-screen","py-14","bg"],[1,"container","flex","flex-col","justify-center","items-center"],[1,"block","txt-color","w-3/4","mx-auto","mt-8","p-6","bg-white","border","border-gray-200","rounded-lg","shadow-sm","hover:bg-gray-100","dark:bg-gray-800","dark:border-gray-700","dark:hover:bg-gray-700"],[1,"items-center","w-full","space-y-4","sm:flex","sm:space-x-8","sm:space-y-0","rtl:space-x-reverse"],[1,"flex","items-center","dark:text-blue-500","space-x-2.5","rtl:space-x-reverse"],[1,"flex","items-center","justify-center","w-8","h-8","border","rounded-full","shrink-0","dark:border-blue-500"],[1,"font-medium","leading-tight"],[1,"text-sm"],[1,"flex","items-center","dark:text-gray-400","space-x-2.5","rtl:space-x-reverse"],[1,"flex","items-center","justify-center","w-8","h-8","border","rounded-full","shrink-0","dark:border-gray-400"],[1,"flex","items-center","txt-color","space-x-2.5","rtl:space-x-reverse"],[1,"card","block","w-3/4","p-6","m-14","bg-white","border","border-gray-200","rounded-lg","shadow-lg","hover:bg-gray-100","transition-all","duration-200"],[1,"text-center","txt-color","font-bold","text-3xl"],[1,"text-center","second-txt-color"],[3,"ngSubmit","formGroup"],[3,"control","inputType","inputId","inputPlaceholder","label"],[1,"btn-alternate-style"],[1,"fas","fa-spinner","fa-spin","text-white"],[3,"control","inputId","inputPlaceholder","label"]],template:function(e,s){e&1&&(t(0,"section",0)(1,"div",1)(2,"div",2)(3,"ol",3)(4,"li",4)(5,"span",5),r(6," 1 "),i(),t(7,"span")(8,"h3",6),r(9,"Verify Email"),i(),t(10,"p",7),r(11,"Enter your Email to send verification code"),i()()(),t(12,"li",8)(13,"span",9),r(14," 2 "),i(),t(15,"span")(16,"h3",6),r(17,"Verification Code"),i(),t(18,"p",7),r(19,"Enter verification code sent to your email"),i()()(),t(20,"li",10)(21,"span",9),r(22," 3 "),i(),t(23,"span")(24,"h3",6),r(25,"Reset your password"),i(),t(26,"p",7),r(27,"Enter new password"),i()()()()(),f(28,R,11,7,"div",11)(29,N,11,7,"div",11)(30,j,12,11,"div",11),i()()),e&2&&(n(4),h("brown-text",s.step===1),n(8),h("brown-text",s.step===2),n(8),h("brown-text",s.step===3),n(8),v(s.step===1?28:s.step===2?29:s.step===3?30:-1))},dependencies:[k,P,S,F,T],styles:[".brown-text[_ngcontent-%COMP%]{color:#8b5e35}"]})};export{L as ForgotPasswordComponent};
