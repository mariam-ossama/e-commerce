import './polyfills.server.mjs';
import{a as D,b as A}from"./chunk-4KOJTPEU.mjs";import{a as I}from"./chunk-YOTOBS4C.mjs";import{a as E,b as L,c as W}from"./chunk-EI6XX62Z.mjs";import{a as T,b as F}from"./chunk-S45EHLM4.mjs";import"./chunk-R3P46UBH.mjs";import{l as x}from"./chunk-B6XYCFTU.mjs";import"./chunk-OK7ZK6LL.mjs";import"./chunk-IT7UANVT.mjs";import"./chunk-FS4VX5NN.mjs";import"./chunk-LYQUDD53.mjs";import{Fb as b,Kb as d,Mb as m,Qa as p,W as a,Xb as y,aa as g,ab as f,ba as h,gc as C,jc as u,lc as w,mc as S,ub as v,vb as _,wb as l,xb as o,yb as n,zb as P}from"./chunk-F7B3EIZI.mjs";import"./chunk-X2SEQXRR.mjs";var M=(r,t,e)=>({id:"foo",itemsPerPage:r,currentPage:t,totalItems:e}),O=(r,t)=>t.id;function z(r,t){if(r&1){let e=b();o(0,"app-card",9),d("favouriteToggled",function(c){g(e);let s=m();return h(s.removeWishlistItem(c))}),n()}if(r&2){let e=t.$implicit,i=m();l("product",e)("isFavourite",i.wishlistIds.includes(e._id))}}function K(r,t){r&1&&(o(0,"div",6),P(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),n())}var B=class r{productService=a(I);wishlistService=a(T);toastrService=a(x);productsList=[];wishlistIds=[];wishList=[];pageSize=0;p=0;total=0;searchKeyword="";ngOnInit(){this.getAllProductsData(this.p),this.getWishlistIds()}onSearchChanged(t){this.searchKeyword=t}getAllProductsData(t=1){this.productService.getAllProducts(t).subscribe({next:e=>{this.productsList=e.data,this.pageSize=e.metadata.limit,this.p=e.metadata.currentPage,this.total=e.results},error:e=>{console.log(e)}})}getWishlistIds(){this.wishlistService.getWishlist().subscribe({next:t=>{console.log(t),t.status==="success"&&(this.wishlistIds=t.data.map(e=>e._id),this.wishList=t.data)}})}removeWishlistItem(t){this.wishlistService.removeFromWishlist(t).subscribe({next:e=>{console.log(e),e.status==="success"&&(this.toastrService.success(e.message),this.wishList=this.wishList.filter(i=>i.id!==t))}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=f({type:r,selectors:[["app-products"]],decls:13,vars:13,consts:[[1,"min-h-screen","py-14","bg"],[1,"text-center","py-5","text-4xl","text-[#8B5E35]","font-bold"],[1,"container","w-3/4"],[3,"search","placeholder"],[1,"products","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-3","py-3"],[3,"product","isFavourite"],[1,"max-w-full","bg-white","border","border-gray-200","rounded-lg","shadow-md","p-4","animate-pulse"],[1,"flex","justify-center","items-center","py-3"],["id","foo",1,"my-pagination",3,"pageChange"],[3,"favouriteToggled","product","isFavourite"],[1,"w-full","h-40","bg-gray-300","rounded-md","mb-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mb-2"],[1,"h-4","bg-gray-200","rounded","w-1/2","mb-4"],[1,"h-10","bg-gray-300","rounded-md"]],template:function(e,i){e&1&&(o(0,"section",0)(1,"h2",1),y(2,"Products"),n(),o(3,"div",2)(4,"app-search-bar",3),d("search",function(s){return i.onSearchChanged(s)}),n(),o(5,"div",4),v(6,z,1,2,"app-card",5,O,!1,K,5,0,"div",6),u(9,"paginate"),u(10,"search"),n(),o(11,"div",7)(12,"pagination-controls",8),d("pageChange",function(s){return i.getAllProductsData(s)}),n()()()()),e&2&&(p(4),l("placeholder","Products"),p(2),_(S(10,5,w(9,2,i.productsList,C(9,M,i.pageSize,i.p,i.total)),"products",i.searchKeyword)))},dependencies:[F,W,L,D,E,A],styles:[".my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current{background:#8b5e35}"]})};export{B as ProductsComponent};
