import './polyfills.server.mjs';
import{a as T}from"./chunk-HEZLGDGX.mjs";import{b as o,d as E,g as P,i as F,k,l as I,m as _}from"./chunk-OK7ZK6LL.mjs";import{a as C}from"./chunk-UJNSQJWN.mjs";import"./chunk-IT7UANVT.mjs";import{a as S}from"./chunk-XRSPYYRK.mjs";import{l as y}from"./chunk-FS4VX5NN.mjs";import"./chunk-LYQUDD53.mjs";import{Kb as h,Mb as w,Qa as a,W as p,Xb as i,Zb as x,a as f,ab as b,ca as u,da as v,qb as c,rb as g,wb as m,xb as e,yb as t,zb as d}from"./chunk-F7B3EIZI.mjs";import"./chunk-X2SEQXRR.mjs";function R(l,r){l&1&&d(0,"i",14)}function B(l,r){if(l&1&&(e(0,"div",15),u(),e(1,"svg",18),d(2,"path",19),t(),v(),e(3,"span",20),i(4,"Info"),t(),e(5,"div",21),i(6),t(),e(7,"button",22)(8,"span",20),i(9,"Close"),t(),u(),e(10,"svg",23),d(11,"path",24),t()()()),l&2){let s=w();a(6),x(" ",s.errorMessage," ")}}var M=class l{fb=p(k);authService=p(C);router=p(y);cookieService=p(S);flag=!0;isLoading=!1;errorMessage="";subscription=new f;registerForm;ngOnInit(){this.initForm()}initForm(){this.registerForm=this.fb.group({name:[null,[o.required,o.minLength(3),o.maxLength(25)]],email:[null,[o.required,o.email]],password:[null,[o.required,o.pattern(/^\w{4,}$/)]],rePassword:[null,[o.required,o.pattern(/^\w{4,}$/)]],phone:[null,[o.required,o.pattern(/^01[0125][0-9]{8}$/)]]},{validators:[this.confirmPassword]})}confirmPassword(r){let s=r.get("password")?.value,n=r.get("rePassword")?.value;return s===n?null:(r.get("rePassword")?.setErrors({mismatch:!0}),{mismatch:!0})}submit(){this.registerForm.valid?(this.isLoading=!0,this.subscription.unsubscribe(),console.log(this.registerForm.value),this.authService.register(this.registerForm.value).subscribe({next:r=>{console.log(r),r.message=="success"&&(this.isLoading=!1,this.cookieService.set("token",r.token),setTimeout(()=>{this.router.navigate(["/login"])},3e3))},error:r=>{this.isLoading=!1,this.errorMessage=r.error.message}})):this.registerForm.markAllAsTouched()}navigateToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(s){return new(s||l)};static \u0275cmp=b({type:l,selectors:[["app-register"]],decls:33,vars:26,consts:[[1,"min-h-screen","py-14"],[1,"container","flex","justify-center","items-center"],[1,"card","block","w-3/4","p-6","m-14","bg-white","border","border-gray-200","rounded-lg","shadow-lg","hover:bg-gray-100","transition-all","duration-200"],[1,"text-center","txt-color","font-bold","text-3xl"],[1,"text-center","second-txt-color"],[3,"ngSubmit","formGroup"],[3,"control","inputType","inputId","inputPlaceholder","label"],[3,"control","inputId","inputPlaceholder","label"],[1,"flex","items-center","mb-4"],["id","agreeToConditions","type","checkbox","value","",1,"w-4","h-4","text-[#8B5E35]","bg-gray-100","border-gray-300","rounded-sm","focus:ring-[#8B5E35]","focus:border-[#8B5E35]"],["for","default-checkbox",1,"ms-2","text-sm","font-medium","third-txt-color"],["href","",1,"underline","text-[#8B5E35]"],[1,"flex","justify-center","items-center"],[1,"btn-alternate-style","flex-3/4"],[1,"fas","fa-spinner","fa-spin","text-white"],["id","alert-2","role","alert",1,"flex","items-center","p-4","mb-4","text-red-800","rounded-lg","bg-red-50"],[1,"text-center","third-txt-color"],[1,"underline","cursor-pointer","text-[#8B5E35]",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","w-4","h-4"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"ms-3","text-sm","font-medium"],["type","button","data-dismiss-target","#alert-2","aria-label","Close",1,"ms-auto","-mx-1.5","-my-1.5","bg-red-50","text-red-500","rounded-lg","focus:ring-2","focus:ring-red-400","p-1.5","hover:bg-red-200","inline-flex","items-center","justify-center","h-8","w-8"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"]],template:function(s,n){s&1&&(e(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),i(4,"Create an Account"),t(),e(5,"p",4),i(6,"create a new account"),t(),e(7,"form",5),h("ngSubmit",function(){return n.submit()}),d(8,"app-input",6)(9,"app-input",6)(10,"app-input",7),e(11,"app-input",7)(12,"li"),i(13,"Invalid Password Pattern (Weak Password)"),t()(),e(14,"app-input",6)(15,"li"),i(16,"Invalid Phone number (must be an egyptian phone number)"),t()(),e(17,"div",8),d(18,"input",9),e(19,"label",10),i(20,"I agree to the "),e(21,"a",11),i(22,"terms of conditions"),t()()(),e(23,"div",12)(24,"button",13),i(25,"Sign Up "),e(26,"span"),c(27,R,1,0,"i",14),t()()(),c(28,B,12,1,"div",15),t(),e(29,"p",16),i(30,"already have an account? "),e(31,"span",17),h("click",function(){return n.navigateToLogin()}),i(32,"Login"),t()()()()()),s&2&&(a(7),m("formGroup",n.registerForm),a(),m("control",n.registerForm.get("name"))("inputType","text")("inputId","name")("inputPlaceholder","Enter your name...")("label","User Name"),a(),m("control",n.registerForm.get("email"))("inputType","email")("inputId","email")("inputPlaceholder","Enter your email...")("label","E-mail"),a(),m("control",n.registerForm.get("password"))("inputId","password")("inputPlaceholder","Enter strong password...")("label","Password"),a(),m("control",n.registerForm.get("rePassword"))("inputId","rePassword")("inputPlaceholder","Re-write password...")("label","Confirm Password"),a(3),m("control",n.registerForm.get("phone"))("inputType","tel")("inputId","phone")("inputPlaceholder","Enter your phone number...")("label","Phone"),a(13),g(n.isLoading?27:-1),a(),g(n.errorMessage?28:-1))},dependencies:[_,P,E,F,T,I],encapsulation:2})};export{M as RegisterComponent};
