<section class="min-h-screen py-14 bg">
  <div class="container w-3/4 m-auto p-4 space-y-6">
    <h2 appHighlight class="text-center py-5 text-4xl text-[#8B5E35] font-bold">All Orders</h2>
    @if(!isLoading){
      @for (order of ordersList; track order._id) {
    <!-- order card -->
    <div class="bg-white rounded-2xl shadow-md p-5 border border-gray-200">
      <div class="mb-4">
        <h2 class="text-xl font-bold text-[#8B5E35]">
          Order #{{ $index + 1 }}
        </h2>
        <p class="text-sm third-txt-color">
          {{ order.createdAt | date: 'medium' }}
        </p>
      </div>

      <div class="grid sm:grid-cols-2 gap-4 mb-4">
        <div>
          <h3 class="font-semibold text-[#9B7E5C] mb-1">Shipping Address</h3>
          <p class="text-sm second-txt-color">
            {{ order.shippingAddress.details }},
            {{ order.shippingAddress.city }}
          </p>
          <p class="text-sm txt-color font-semibold">
            Phone: <span class="font-normal txt-color second-txt-color">{{ order.shippingAddress.phone }}</span>
          </p>
        </div>
        <div>
          <h3 class="font-semibold text-[#9B7E5C] mb-1">Payment & Status</h3>
          <p class="text-sm font-semibold txt-color">Method: <span class="font-normal second-txt-color">{{
              order.paymentMethodType }}</span></p>
          <p class="text-sm font-semibold txt-color">Paid:
            <span class="font-medium" [class]="order.isPaid ? 'text-green-600' : 'text-red-600'">
              {{ order.isPaid ? 'Yes' : 'No' }}
            </span>
          </p>
          <p class="text-sm font-semibold txt-color">Delivered:
            <span class="font-medium" [class]="order.isDelivered ? 'text-green-600' : 'text-yellow-600'">
              {{ order.isDelivered ? 'Yes' : 'No' }}
            </span>
          </p>
        </div>
      </div>

      <div class="space-y-3">
        <h3 class="font-semibold txt-color">Items</h3>
        @for (item of order.cartItems; track item._id) {
        <div class="flex items-center gap-4 border border-gray-200 shadow bg rounded-lg p-3">
          <img [src]="item.product.imageCover" [alt]="item.product.title" class="w-20 h-20 rounded-md object-cover" />
          <div class="flex-1">
            <h4 class="text-[#8B5E35] font-medium">
              {{ item.product.title }}
            </h4>
            <p class="text-sm txt-color">
              Qty: <span class="second-txt-color">{{item.count}}</span> â€¢ Price: <span
                class="second-txt-color">{{item.price}}</span> EGP
            </p>
            <p class="text-sm txt-color">
              Brand: <span class="second-txt-color">{{ item.product.brand.name }}</span>
            </p>
          </div>
        </div>
        }
      </div>

      <div class="mt-4 flex justify-between items-center border-t border-t-[#C0C0C0] pt-3 txt-color">
        <p class="font-semibold">Total:</p>
        <p class="text-lg font-bold">
          {{ order.totalOrderPrice }} EGP
        </p>
      </div>
    </div>
    } @empty {
      <app-empty [title]="'No Orders yet'"
                 [description]="'You have not made any order yet.'"></app-empty>
    }
    } @else {
      <div role="status" class="bg-white rounded-2xl shadow-md p-5 border border-gray-200 animate-pulse space-y-6">
      <!-- Header -->
      <div>
        <div class="h-5 w-32 bg-gray-300 rounded mb-2"></div>
        <div class="h-4 w-40 bg-gray-200 rounded"></div>
      </div>

      <!-- Shipping + Payment -->
      <div class="grid sm:grid-cols-2 gap-6">
        <div class="space-y-2">
          <div class="h-4 w-28 bg-gray-300 rounded"></div>
          <div class="h-3 w-40 bg-gray-200 rounded"></div>
          <div class="h-3 w-32 bg-gray-200 rounded"></div>
        </div>
        <div class="space-y-2">
          <div class="h-4 w-32 bg-gray-300 rounded"></div>
          <div class="h-3 w-28 bg-gray-200 rounded"></div>
          <div class="h-3 w-24 bg-gray-200 rounded"></div>
          <div class="h-3 w-20 bg-gray-200 rounded"></div>
        </div>
      </div>

      <!-- Items -->
      <div class="space-y-3">
        <div class="h-4 w-24 bg-gray-300 rounded"></div>
        @for (_ of [1,2]; track _) {
        <div class="flex items-center gap-4 border border-gray-200 rounded-lg p-3">
          <div class="w-20 h-20 bg-gray-200 rounded-md"></div>
          <div class="flex-1 space-y-2">
            <div class="h-4 w-40 bg-gray-300 rounded"></div>
            <div class="h-3 w-32 bg-gray-200 rounded"></div>
            <div class="h-3 w-24 bg-gray-200 rounded"></div>
          </div>
        </div>
        }
      </div>

      <!-- Total -->
      <div class="mt-4 flex justify-between items-center border-t border-gray-200 pt-3">
        <div class="h-4 w-20 bg-gray-300 rounded"></div>
        <div class="h-5 w-24 bg-gray-400 rounded"></div>
      </div>

      <span class="sr-only">Loading...</span>
    </div>
    }
  </div>
</section>